

Abstract?Machine-to-Machine (M2M) technology enables to interconnect machines with the least possible human intervention.

The nature of M2M traffic, small and periodic, is different from the traditional traffic originating from computers or mobile phones, big and bursty. However, the number of nodes involved in such technology impacts the network as it has mainly been designed for Human-to-Machine (H2M) communications.

Due to the number of involved M2M nodes and their intrinsic constraints, the retrieval of M2M traffic with existing networks is a real challenge. In order to do so, the authors propose a lightweight service announcement architecture, re-using already deployed Wi-Fi networks. This solution extends information announced in the IEEE 802.11 beacon frame. It enables M2M devices to automatically detect the most appropriate network among the one discovered, reduces the amount of signaling messages exchanged to do so and consequently, the delay needed to collect this traffic.

The feasibility study, based on real-world data, shows that the frequency of announcement, the amount of data to send and the available density of Access Points, have to be taken into account in order to use Wi-Fi networks to retrieve M2M traffic.

Keywords?M2M traffic, service discovery, IEEE 802.11, ex- tended beacon

I. INTRODUCTION The Machine-to-Machine (M2M) technology paradigm is  built around the principle of interconnection of machines with the least possible human intervention. The data traffic generated by these new M2M applications is generally quite different from the ?classical? Human-to-Machine (H2M) tech- nologies.

M2M communications usually generate less traffic per node than computers or mobile phones, but impact the network design since the number of nodes is much higher. For instance neither 3G, nor even LTE networks alone can be used to interconnect all potential M2M endpoints. In fact, Po?tsch et al. [9] showed that even the considered small M2M traffic can increased delay on best effort H2M traffic in LTE network.

In addition, M2M nodes, that can be mobile, are sleeping most of the time and wake up either when an event occurs to send some information, or periodically to check if some request has arrived from the network. The low-volume per endpoint, periodic, energy-, resource-, and cost- efficient nature of the M2M traffic is in stark contrast to the high-volume per endpoint, bursty nature of the H2M communications.

It is thus of crucial importance to take the intrinsic M2M traffic characteristics in the design of future communication architectures, and whenever possible ? adapt and optimize the existing ones.

Wi-Fi coverage is high in densely populated areas such as cities as shown in [1], but can be subject to traffic limitations for data exchange. A new concept which has been gaining popularity in the recent years is the sharing of Wi-Fi con- nectivity among the members of a given group ? Community Networks (CN). As an example, all major ISP providers in France offer to their customers the possibility to participate to ISP-wide CNs [2], which given the significant high-speed Internet penetration rate provides an almost ubiquitous access.

FON1 offers the same kind of services in many countries such as U.K. or Japan. It is important to note that this type of service is different from the ?free-for-all?, open Wi-Fi networks, as well as the ones provided by local businesses for their clients (e.g. a hotel providing the password to their guests). Indeed, in these scenarios it is difficult to comply with the regulations in different countries (e.g. identifying a user for legal purposes), but also to be able to guarantee acceptable performance to the users of the network, and most importantly ? for security reasons. As a consequence, the CNs are built around the notion of Virtual Wireless ISP (VW-ISP) where a dedicated, well known Wi-Fi SSID (Service Set IDentification) is announced by every participating Access Point (AP) in addition to the user-defined one. The ISP provides credentials (typically user name and password, but can also be based on certificates, etc.) to its clients which allow them to connect to the VW-ISP.

The core of this paper is to define and study a new application of the VW-ISP approach. We propose a new way to announce services in IEEE 802.11 beacons frame and so, to re-use existing Wi-Fi architecture for M2M communications.

This is an adaptation of the ISP CNs to M2M applications and ? as we show through the paper ? does not require any modification to the existing hardware. Once again, it is important to stress that the classical VW-ISP approach cannot be reused as-is for M2M communications as it relies on typical H2M characteristics.

The solution we propose uses the possibility to include extensions to the information announced in IEEE 802.11 bea- cons. We detail the service announcement mechanism and its  1http://corp.fon.com/  IEEE ANTS 2013 1569805783      role in a generic, M2M service oriented architecture. Our pro- posal is evolutionary technology-wise, and opens new horizons for business applications. We introduce the role of Wi-Fi M2M Service Provider (WM-SP), where an ISP can leverage its existing infrastructure to generate additional revenue sources, and in the same time create an enabler for new M2M services.

To the best of our knowledge, this is the first time this concept is studied in detail.

The rest of the paper is structured as follows. The related work is presented in Section II. The M2M service provider architecture is then introduced in Section III. We perform a feasibility study of the proposed architecture in Section IV followed by the conclusion of this paper in Section V.



II. RELATED WORK Deployment of M2M devices or sensors in our everyday life  is increasing [7]. The traffic generated by these devices is dif- ferent from the traditional traffic originating from a computer or a mobile phone. In fact, nodes are mainly sleeping, only waking up to send collected data or to check for incoming requests. Collecting these data is an issue to be solved due to the intrinsic constraint of these devices and their significant growths prevent from using existing architecture as-is such as cellular network.

Solutions exist such as the one offered by the company SigFox which introduces a beaconless unidirectional access to the IMS band for M2M applications2. However, in this technology, the data retrieval is performed via an Aloha-style mechanism. The long radio range and the energy constraints makes the bandwidth available very limited for applications.

Additionally, Kleinrock et al. [6] discussed slotted-Aloha sta- bility problem and showed that ? for large number of terminals ? the channel can get saturated. Furthermore, this solution requires the deployment of a new and dedicated cellular network. Even though the technology enables to cover larger area, the Access Network (AN) should be updated accordingly to the growing number of such devices.

Density of Wi-Fi access network is increasing. It has been so much expanding this past years that several research studies have been conducted to define new ways to benefit from the existing wireless deployment such as in [8]. This deployed AN could be used to retrieve M2M traffic since it offers much more point of attachment to the network than any other solutions, and a sufficient enough bandwidth. One problem being to determine which APs support a M2M data collecting service among all the available APs. Solutions such as IEEE 802.21 and IEEE 802.11u help to inform about the AN capabilities.

Both of them could then be used in the discovery of services availability on APs. However, with such protocols, nodes have to exchange additional messages in order to gather the informa- tion about the different networks. This information gathering need to take place prior to the selection and connection to the candidate AN. In fact, nodes cannot spend time connecting to an AP that will not be able to fulfill their goal ? transferring M2M data. Nodes have then to process information from all surrounding APs to select the most suitable one for their  2http://www.sigfox.com/en/  Fig. 1. Schematic view of Wi-Fi network deployment  use. Which once again, is a loss in term of awake time, signaling exchange and energy consumption ? and this, each time they have to send information. In fact, the signaling message exchanged in IEEE 802.21 represent 22% of the total transmission time on the device side [4]. Worst of all, most of this time is spent for the retrieval of information regarding the AP capabilities.

The Wi-Fi M2M Service Provider (WM-SP) approach we introduce in this paper is based on a new way to announce services supported by Wi-Fi networks. In addition to limiting the amount of exchanged and processed information, our proposal decreases the time needed to select the correct AN and therefore the time needed to send data. This is in stark contrast to the alternative approaches. To the best of our knowledge, this is the first time the WM-SP concept is defined and studied in the light of lightweight service announcement via Wi-Fi beacon options.



III. SERVICE-CENTERED ARCHITECTURE In this paper we will be using the terms ?service? and ?M2M  service? interchangeably. We will concentrate on services that need to be deployed in areas where Wi-Fi coverage (residen- tial and/or public) is already assured through one or more networks. The transport of M2M traffic will be ensured by re-using the existing networks, each provider deciding which services to enable on its network. M2M devices have then to be able to discover the services available on each surrounding Wi-Fi networks.

A. Principle We propose a solution that overcomes issues of existing  protocol to gather and transfer data generated by M2M devices.

In order to do so, the solution (i) re-uses existing Wi-Fi networks, (ii) advertises about available services as soon as possible without increasing the amount of message exchanged and (iii) enables M2M nodes to transfer their data as fast as possible.

Figure 1 presents a schematic view of current Wi-Fi network deployment in cities. APs are set up by different providers to offer wireless Internet access. However, as it often depends on the willingness of their customers, providers do not have      an uniform coverage. Additionally, devices cannot access the Internet via any APs, as they need proper credentials (lo- gin/password, a key) to connect to it. This high protection prevents from using Wi-Fi networks for other uses.

Our idea is to enable multiple services on subsets of APs ? possibly belonging to different ISPs ? to ensure an uniform coverage. Each APs will have its legacy usage, provide Internet access to users who have the appropriate credentials, and at the same time, offer a ?restricted? access for other usages. Subsets of network will then propose additional support for services that would be advertised by the corresponding APs.

For instance, in Fig. 1, a subset of APs (marked with a circle) offers a service to collect data coming from energy plug ? a connected power plug monitoring the energy consumption.

These APs advertise in the beacons their support for this ser- vice. Then, this announce allows energy plugs to differentiate the APs and detect the ones supporting this service (and which will enable them to send the monitored data), from the rest.

Once a plug is paired with one AP, it transmits its data to the AP that will forward them via tunneling mechanism to the correct destination, represented by the server in the top-right of Fig. 1.

To achieve this goal, an AP has to advertise the services it supports and forward M2M traffic in addition to its main use ? providing Internet to standard users. These mechanisms are simple to set up as shown in Section III-C. In addition, it enables to adapt the periodicity of service advertisement depending on the importance given to the service.

B. Announcing support for M2M services Service advertisement mechanism is required in order to  enable the M2M devices to automatically detect which services are available on a network when the network is discovered.

Additionally, the service availabilities must be discoverable without having to associate to the network. Our proposal ensures these two requirements while avoiding to exchange several messages with the AP and being able to discard networks that do not support the desired service. In order to do so, we propose a solution based on existing messages that are already present in the legacy networks.

During the discovery phase, devices receive periodic mes- sages (beacons) from APs. These messages contains different information regarding the Wi-Fi network for the devices to connect to it. Our proposal consists in adding to the Vendor- Specific field of the beacon (or probe-response) frame an option tag describing the services supported by the network.

M2M nodes can use this information to determine which Wi- Fi networks are worth connecting to. Contrary to traditional Wi-Fi networks, active probing may be too expensive energy- wise for a battery-operated M2M device looking for a specific service. For that reason, in this paper we will limit our study to passive probing. It is important, however, to stress that the active probing mechanism is in complete accordance with our architecture.

Each service is represented with an unique identifier (ID).

The tag included in the beacon will thus contain as much IDs as supported services. However, this tag should also contain  some specific information additionally to the available ser- vices. In fact, we believe it can be essential to have information on the providers deploying the service (e.g. the WM-SP). So, tags should as well contain a provider ID (WM-SP ID). Thus, provider-specific nodes can ignore all other providers except the one they belong to.

This tag ensures that devices discover the available services supported by each Wi-Fi networks at the same time they dis- cover them. There is no additional message exchange needed for this discovery phase and the tag should be small enough to not overload beacons. Devices can ignore APs not supporting the service they require. Finally, devices that do not base their network selection on the service availability can simply ignore this option, e.g. this mechanism is entirely backward compatible.

Depending on the delay tolerance of the service, the tag can be set in each beacon or every n beacons. For instance, critical services such as an health monitoring, will be advertised in all beacons of a given AP. This ?beacon hop? increases the probability for critical services to be discovered. Moreover, this advertisement period enables to have more services advertised while bypassing the tag size issue ? since there will be a shifting in the advertised services. With this solution, adding a new service advertisement in the beacon is simple as it only requires to add the new service ID into the advertised services.

C. Support for M2M traffic retrieval 1) At the Access Point level: In this architecture, AP has to  have a different behavior. In fact, M2M traffic has to be routed specifically as shown in Fig. 2. APs will have to manage data flows coming from M2M communications in addition to its main activity, i.e. providing Internet access. AP will also have to manage the tag announced in its beacon messages. AP will have a configuration mechanism listing all the services it has to announce and their parameters, such as the advertisement periodicity, the service ID and the level of authentication needed.

When the AP receives M2M traffic, it has to transfer it to the corresponding destination. One of the possibilities is to construct Virtual Private Networks (VPN) upon request. In addition, if authentication is needed between the AP and M2M nodes, APs will have to manage service authentication keys.

There are a lot of possibilities described in the literature, such as based on pre-shared keys (distributed or centralized), or based on a Public Key Infrastructure (PKI). In any case, the specific mechanism can be known in advance (configured for each service). We consider this question, albeit essential, out of scope for our study and we assume the nodes are authenticated via an appropriate mechanism, such as based on IEEE 802.1X.

2) At the node level: Device will have a different behavior since they need to take into account this service announcement.

In fact, devices will have to check for the presence of a service tag in the beacons. Devices should therefore be able to understand this tag and compare the expected service ID to the ones advertised in beacons. Once a matching WM-SP is found, the device has to authenticate to the AP and send the corresponding data using the IP address allocated by the      Fig. 2. Specific routing rules inside APs  AP or the one assigned prior to its deployment. Indeed, M2M nodes can be deployed with a pre-assigned IP address. This pre-assignment will avoid having to retrieve the IP address from the AP and gain time usually used to do so for retrieving M2M data.



IV. FEASIBILITY STUDY The WM-SP architecture described in Section III relies on  current standard technologies and provides new communi- cation paradigm for M2M devices. In order to demonstrate that the principle is indeed valid, we performed a feasibility study in a specific use case. We considered the case of a monitoring service, which could be monitoring the activity and position of a pet or monitoring someone?s health (both examples having a different level of criticality). Thus, a device is monitoring some physical characteristic and sending the measurements whenever it is under a Wi-Fi coverage that support its monitoring service.

The device is mobile, moving inside an area alternating between ?with? and ?without? Wi-Fi coverage. Even when it is under Wi-Fi coverage it may not be able to send its data as the corresponding AP may not support the service it is looking for, or the devices may be sleeping when it receives the beacon.

The goal here is to study the influence of the advertisement frequency on the time to discover the supported services and the influence of the Wi-Fi density on the performance.

A. Mathematical modeling of a M2M monitoring service The aforementioned service can be represented by a three  states Markov chain: ? State 0: the device is not under Wi-Fi coverage; ? State 1: the device is under Wi-Fi coverage but has not  received a beacon with the expected tag; ? State 2: the device is under Wi-Fi coverage and has  received a beacon with the expected tag.

We consider that if the device is under Wi-Fi coverage,  it leaves the corresponding state after a delay following an exponential law with rate ?. Transitioning from non-covered to covered region is done with rate ?. In order to make the problem mathematically tractable, we consider that beacons are sent following a Poisson law with a rate ?. If we denote with p the probability that the device is sleeping, this Markov chain can be illustrated as shown in Fig. 3.

As the studied scenario is a continuous-time Markov chain with fixed number of states, the generator matrix, Q, can be  Fig. 3. Markov Chain model for a monitoring service  10 2  ?  ?  p ? ?  obtained in closed form:  Q =  (?? ? 0 ? ??? p? p? 0 0 0  ) (1)  Let ?t(i) represent the probabilities to be in the state i, while Pt represent the transition state matrix. If we note ?t = (?t(0), ?t(1), ?t(2)) then  ?t = ?0 ? Pt = ?0 ? eQ?t (2) As mentioned previously, we are interested in knowing the  time necessary to receive an appropriate tag, i.e. to arrive in state 2. After computation, ?t(2) can be reduced to the following expression :  ?t(2) = 1?K1e?At2 ?K2e?Bt2 (3) with  K1 =  ? ?  2 + p?(?? ?) + ?2 2(?+ ?)R  K2 =  +  (?+ ?)2 + p?(?? ?) 2(?+ ?)R  A = ?+ p? + ?+R  B = ?+ p? + ??R R =  ? ?2 + 2??+ 2?p? + (p?)2 ? 2?p? + ?2  Values for ? and ? have to be determined in order to complete this model and study their influence on the delay needed to discover the services.

B. Determining values for this modeling In order to instantiate the aforementioned Markov chain,  we use real world data that characterize Wi-Fi deployment.

Wi2Me [3] is an Android-based research application that has been developed to build Wi-Fi APs map and automate Wi-Fi connection. This tool also allows evaluating the availability and performance of CNs.

1) Methodology: Wi2Me application uses active probing to discover Wi-Fi networks and then connects to the AP with the highest signal level. It continues scanning the different channels and if it finds a network with a better signal level, will then attempt to connect to it. Then, aside from its original aim, Wi2Me enables to determine the Wi-Fi network density, since it stores results of all the scans performed while the application is running. Guidec et al. [5] used Wi2Me in a field trial for testing a disruption-tolerant application in a rural area. Wi2Me has also been extensively used in the city of Rennes (France), where volunteers have walked around the city in order to      TABLE I. WI2ME DATA OVERVIEW FOR FIELD TRIAL  Traveled Average Average Number distance connected disconnected of discovered  (km) time (sec) time (sec) APs  1 - Rural 4.6 44.7 53.9 45  2 - City 34 25.57 9.9 7280  determine the density of Wi-Fi networks and the quality of connection [2]. In both cases, volunteers were equipped with a device running Wi2Me application. They walked around the desired area and repeated this process several times following different path. Table I presents the main values extracted from these two trials.

2) Field trial data: Table I shows that in the first (resp.

second) case, the device is connected to an AP on average during 44.7sec (resp. 25.57sec). The average time between two connections (not covered) is 53.9sec (resp. 9.9sec). Finally, Wi2Me has discovered 45 (resp. 7280) distinct APs during the trial.

We noticed that the average time under Wi-Fi coverage is almost the double in the first trial (in the rural area) than in the second trial. This difference can be explained since the environments between a city center and a rural area are com- pletely different. In fact, there is less shadowing in the rural area, as for instance there are less objects obstructing signals propagation. But the average time without Wi-Fi coverage is almost 5 times higher in the first trial, which is mainly due to the low number of discovered AP in this area.

3) Values obtained: Data collected by this application dur- ing these trials allows us determining the average time during when a device is (resp. not) under Wi-Fi coverage. The behavior of device running Wi2Me application is simple, it connects to an AP when possible or is waiting to discover APs.

With the notation of Fig. 3, when the device running Wi2Me application is (resp. not) under Wi-Fi coverage, i.e. connected to the corresponding AP, it leaves the corresponding state after a delay following an exponential law with rate ? (resp. ?).

Hence, the average time under (resp. without) Wi-Fi cov- erage is 1/? (resp. 1/?). Values for ? (resp. ?) can then be computed regarding the average connected (resp. waiting for connection) time retrieved from Wi2Me measurement for these two trials. And the Wi-Fi coverage is then given by ??+? .

In order to study the impact of better covered areas on the performance, other values for ? and ?, stated as case 3 and 4 in Table II, have been estimated based on a basic cross- multiplication. This new values enable to represent the case of cities with higher Wi-Fi density, i.e. with an higher percentage of Wi-Fi coverage. All these values (computed and estimated) are summarized in the Table II.

C. Results and analysis 1) Influence of advertisement period: The frequencies at  which a service is advertised within the beacon depend on the importance given to a service. We studied the influence of the advertisement period over the delay needed to discover the service. Here, the probability ?t(2) is fixed, just as the values of ? and ? for which, in the following results, we used the  TABLE II. ESTIMATED AND COMPUTED VALUES FOR ? AND ?  Case ? ? ? = ?/? Coverage Computed  1 - Rural 0.018 0.022 0.82 45%  2 - City 0.1 0.04 2.50 72% Estimated  3 - City 0.14 0.035 4 80%  4 - City 0.28 0.03 9.33 90%  Fig. 4. Influence of advertisement period over time to detect appropriate tag  10?2 10?1 100 101      25.57  Advertisement period (sec)  t( se c)  ?t(2) = 99%  ?t(2) = 98%  ?t(2) = 95%  ?t(2) = 90%  ?t(2) = 85%  ?t(2) = 80%  values obtained in the case 2 of Table II. We also considered that the device is always awake ? p = 1.

1/? represents the advertisement period and t the time  needed to receive the expected tag (i.e. state 2 on Fig. 3).

The influence of ? (on the abscissa) on the time t (on the ordinate) can then be plotted as shown on Fig. 4. Each curves represent different values for ?t(2), the probability that the time to receive the appropriate tag is lower than t. For instance, the point marked with solid black lines on Fig. 4 shows that the device has a probability of 99% to receive the expected tag in less than 37 seconds for a service advertised every second.

We can conclude that: ? The delay needed to receive an appropriate tag has a  limit when ? tends to infinite (i.e. period tends to 0); ? This delay is growing exponentially for period greater  than 1s; ? As expected, the higher the success rate, the higher the  delay; ? For case 2, the advertisement period cannot be higher  than 2.5 sec, otherwise delay needed to receive an appropriate tag becomes higher than the average covered time (dashed black line);  ? And for the same reason, it is not likely to have services with a success rate > 0.95 for this specific density.

2) Influence of AP density: In this section, we explored the influence of AP density over the performance of our architecture. We fixed the value of ? and see the influence of ? and ?, i.e. the average time with and without Wi-Fi coverage,      Fig. 5. Influence of Wi-Fi density over time to detect appropriate tag  0.8 0.85 0.9 0.95 1      ?t(2)(%)  t( se c)  1?Rural(?1 = 0.82) 2? City(?2 = 2.50) 3? City(?3 = 4.00) 4? City(?4 = 9.33)  on the time t to receive an appropriate tag. To do so, we used the values presented in Section IV-B and listed in Table II. The influence of the density over the delay t is plotted in Fig. 5.

As expected, the delay needed to receive the expected tag is lower in denser area, i.e. with a greater ?. However, the case 1 (in rural area) presents better results (cf. dashed line in Fig. 5) than cases 2 and 3 (city center) for a success rate lower than 0.9. But, for success rate higher than 0.9, results of case 1 are deteriorating drastically. This should be taken into consideration since the time without Wi-Fi coverage in the rural area is too high to enable a constant high probability of successfully receive a beacon. Thus, depending on the desired success rate, study on the available Wi-Fi density has to be performed before deploying a service.

3) Probability to successfully send data: In this monitoring scenario, being able to receive the appropriate tag is not the most important. In fact, the goal for the device is to successfully send the collected data. With the Markov chain depicted in Fig. 3, the probability to send data before leaving the current Wi-Fi area is the following:  P = e???? (4)  where ? is the time needed to send the data. For an IEEE 802.11b Wi-Fi network, the typical throughput is around 6Mbit/s. We can re-use values measured during the trial performed in [5] to illustrate the data transmission part. The data produced by a wireless Electrocardiogram (ECG) shim- mer sensor is around 16kB every 20sec. For this example, ? is then equal to 21.33ms. Such sensors need 21.33ms to send their data every 20 sec. In the case 2, the probability for this sensor to send its data before leaving the Wi-Fi coverage is P = e?0.8532?10  ?3 = 0.99. Therefore, in 99% of the time and  for this density, this specific device will always successfully send its data before leaving the current coverage. And since it only needs 21.33ms to transfer the data, the sensor will still be able to do it, even with a service advertisement period from 100ms to up to 2 seconds.

Thus, it is possible to use such a mechanism to collect M2M traffics via existing Wi-Fi networks. However, the advertise- ment period of each services depend on the density of APs offering these services and on the size of data to send.



V. CONCLUSION AND PERSPECTIVES In this paper, we presented a lightweight service announce-  ment architecture and studied its properties in the context of Wi-Fi networks. Specifically, we analyzed the possibility of re- using existing Wi-Fi networks for M2M communications. Wi- Fi networks are a good alternative to cellular network and will inevitably be impacted by the M2M traffic. We demonstrated that depending on the importance given to a service, the density of Wi-Fi networks is often sufficient to enable the retrieval of M2M data. The results are based on mathematical model of the proposed architecture which allow for a close-form solution. The model has been parametrized with real-world data collected in several war-driving campaigns.

We plan to extend our study in several directions. The impact of a large number of M2M nodes within a specific coverage of Wi-Fi networks is the next step. In fact, contrary to cellular networks the high amount of APs enable to balance the nodes among them. The effectiveness of announcing avail- able services through beacons should also be studied through simulation of the deployment of a critical service, such as an health monitoring service. These simulations will enable to compare this solution and its performance with others.

