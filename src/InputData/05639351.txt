

Abstract?Association rules mining is an important research field in data mining. Over the years, a variety of algorithms to find frequent itemsets in very large transaction databases has been developed. The key feature in most of these algorithms is that they use a constant support constraint to control the inherently exponential complexity of the problem. Long itemsets with low support can still be interesting but it is unable to find them. In this paper, we present a new association rule mining framework: fuzzy decreasing support-confidence that finds all itemsets that satisfy a length-decreasing support constraint. On this basis, by analyzing the correlation between the antecedent and the consequent of the generated rules, we further propose two correction frameworks: (1) Fuzzy Decreasing Support, Confidence, Interestingness; (2) Fuzzy Decreasing Support, Bidirectional Confidence, Interestingness; We extract data about the relevant factors of Syndrome Differentiation and the patients? medication from the coronary heart disease data collected from the hospitals. The experimental results show that the frameworks proposed in this paper not only verify the existing Syndrome Differentiation and regular patterns of medication, but also discover Syndrome Differentiation with a combination of factors and medicine compatibilities among multiple drugs.

Keywords-Association rules;Coronary Heart Disease; Fuzzy decreasing support; Bidirectional confidence; Interestingness

I.  INTRODUCTION Coronary Heart Disease (CHD) is a common  cardiovascular disease which does seriously harm to humans? health. It belongs to the category of chest stuffiness and pains on Traditional Chinese Medicine (TCM). The research of TCM syndrome differentiation could help to improve the level of TCM treatment based on syndrome differentiation and clinical medication programs. Currently, the main research of CHD differentiation [1-3] involves in coronary angiography, QT dispersion and JT dispersion, ultrasonic cardiogram, blood lipid and so on. Mining association rules are absorbed into searching syndrome differentiation of CHD. Data oriented study becomes a new way for TCM syndrome differentiation of modern CHD.

By analyzing the syndrome differentiation experiences from  the famous or old traditional Chinese medicine doctors, we can discover some laws of syndrome differentiation and improve the accuracy of differentiation of doctors? clinical CHD.

Therefore, the introduction of data mining methods into the syndrome differentiation of CHD will have a huge theoretical and practical significance. According to the characteristics of TCM data, mining association rules based on the attribute constraint and the antecedent-consequent constraint is studied in [4]. In [5] the author uses search constraint to discover interesting association rules and reduces the number of generated rules. However, these approaches above make improvements on the basis of a constant support threshold, so they still can not mine the effective long patterns. According to the characteristics of CHD data, this paper uses the association rule mining algorithm with fuzzy decreasing support constraint to mine the relative factors of differentiation.



II. RELATED WORK It is an important issue to mine association rules from  transaction databases in data mining. Some relative definition is given in [10]. At present, the relative researches mainly include two aspects: (1) Aim at the long itemsets with potential value and low support, consider how to mine the frequent itemsets. (2)Aim at the correlation of rules generated, do the analysis and study how to improve the correlation between the antecedent and the consequent of the rule.

Aim at the long itemsets with potential value and low support. Researchers have proposed the constraint of length- decreasing support to generate frequent itemsets. A strategy of length-decreasing support for mining frequent itemsets is proposed in [6-7]. In this process, the original character: all subsets of a frequent itemset are frequent will be no longer satisfied. So it presents two new mining algorithms (LPMiner and SLPMiner) to improve efficiency. Based on the improved FP-tree algorithm, it analyzes the constraint of length- decreasing support and introduces new search strategies and prune methods. However, the constraint of decreasing is not precise enough to accurately reflect the change of support of     itemsets with different length. Attribute weight is combined with length-decreasing support to mine frequent itemsets in [8].

The strategy of decreasing here still has no regularity. It is difficult to determine the support threshold for the length of each itemsets in practical application.

Aim at the correlation of the generated rules. In order to make the rules more interesting, researchers have put forward a number of metrics of interestingness. In [9] three types of metrics: (any-confidence, all-confidence, and bond) are proposed to take place of support. In [10] a new metric of interestingness by using the information of classification is proposed. It gives a definition of interestingness: the support of rule is R times more than expected, or the confidence is R times more than expected. R is a constant that user specify. In [11] a significance measure for association is proposed by making use of 2?  correlation test. Its interestingness was defined as ( ) /( ( ) ( ))IS P AB P A P B= . In [12] a method based on linear regression and reverse authentication is presented to verify the correlation of the association rules.



III. FRAMEWORK OF FDSC  A. Formula of FDSC The concept of length-decreasing support constraint is  firstly described in [6]. This constraint can remove many short itemsets that are not frequent enough. However, the linear decreasing constraint is not precise enough to reflect the change of the support when the length of itemsets is changing.

On this basis, the paper proposes a new constraint of fuzzy decreasing support to discover the corresponding frequent itemsets. In our problem the support of an itemset decreases as its length increase and it also can be applicable to datasets from different domains. So the correlation coefficient must be adjustable. Therefore, definition of the method is as follows:  ( )  , 1  ( - ) ( ) + s,  ,  f k  m k min k maxm s min k max  min max s k max  ?=  ? ?? ? ?? ? < <? ??  ???  (1)  where k is called the length of an itemset, s and m are constants, s?(0,1), m?(0,1) and s<=m., min, max and ? are the adjustment coefficients. Max is the maximum value of the length while min is the minimum length. When the length of frequent itemsets is smaller than or equal to min, the threshold of support gets the maximum value m. When the length of frequent itemsets reaches the threshold expects given, the threshold of support of this length will be the value of constant s, that is to say, the support will no longer reduce. Hence the range of f (k) is [s, m]. The parameters are set as follows: (1) If you set m=s, f (k) is using a constant support threshold; (2) If you set ?=1, f (k) is a linear decreasing function; (3) If adjustment begins decreasing when the length of itemsets is L, you only need to set min=L; (4) If f (k) is chosen as a fuzzy decreasing function and min and max are known. You can solve the parameter ? through a given k0 and a determined f (k0). The derivation formula is as follows:  ( ( ) )  ( )  ( )  ( ) ( ) (  [( ) /( )] ( ( ) ) /( )  log  )  f k s  m s k max  min max  k max f k m s s  min max  k max min max f k s m s?  ?  ? ?  ? ?  ?  ? = ? ? +  ?  ? ? = ? ?  =  (2)  (5) When f (k) is chosen as a fuzzy decreasing function, if decline curve is a form of upper convex, the range of ? is (0, 1). If the decline curve is a form of lower concave, the range of ? is (1, ?).

The significance of the formula is as follows: the formula contains first-order linear function and fuzzy decreasing function, and it can adjust the coefficients accordingly for data from different domains. Through the coefficient adjustment, it can not only satisfy the traditional association rule mining, but also satisfy the associating rule mining with linear decreasing support or fuzzy decreasing support. Therefore, it has higher flexibility.

B. Related Properties Property 1 x y? ? , then ( ) ( )sup x sup y> .

Property 2 Any itemset whose length is k satisfies: f(1)>=f(k)>=f(k+1), then f (k) is called a length-deceasing support constraint to the transaction database.

Property 3 Any itemset x whose length is kx satisfies: sup(x)>=f(kx), then x is called a frequent itemset that satisfies a length-deceasing support constraint.

Property 4 The property of smallest valid extension (SVE): Assume itemset x and itemset y, their length are kx and ky respectively and x y? , sup(x)<f(kx). Then the necessary condition that y is a frequent itemset to f (ky) is:  1 ( ( ))yk f sup x ?>= .

In our problem, an itemsets can be frequent even if its subsets are infrequent. So the traditional way to mine association rules loses effectiveness in removing the candidate itemsets. Therefore, we mainly use Property 4 and the constant f (max) to discard non-frequent itemsets.

C. Generating Rules (1)Find all frequent itemsets that satisfy a length-  decreasing support constraint.

(2)According to the obtained frequent itemsets, generate association rules by using the confidence constraint.



IV. TWO CORRECTION FRAMEWORKS, FDSCI, FDSBCI  A significance measure for association by using 2?  correlation test is proposed in [11]. Its interestingness is defined as IS (A, B)=P(AB)/(P?A?P(B)). The formula is defined from the perspective of data. By calculating the Interestingness of the antecedent and the consequent of rule, we can know whether they have correlation. If IS (A, B) >1, it shows that A and B have a positive correlation. If IS (A, B) =1, it shows that A and B are independent to each other. If IS (A, B) <1, it shows that A and B have a negative correlation. Therefore,     through the Interestingness formula, we can study the correlation between the antecedent and the consequent of rule from qualitative perspective.

A. Framework of FDSCI In order to mine the rules whose antecedent and consequent  have positive correlation, the paper adds a new metric- Interestingness to generate association rules based on the framework of FDSC. Therefore, when generating rules for each frequent itemset, it must satisfy not only the minimum confidence, but also the minimum IS. We usually need to mine the positive correlation rules. So the threshold of Interestingness is larger than or equal to 1. This model is applicable to mining association rules with decision-making attribute.

B. Framework of FDSBC Association rules are those implications that can be  depicted as C=>K. It reflects the probability of the case when C and K will occur simultaneously and the conditional probability of the case when K will occur when C has occurred. Such rules can only determine the impact of K on C but can?t determine the impact of C on K simultaneously. Actually people are usually interested in mutual influence rules. For example, TCM prescription is a combination of herbs and the herbs in group must have mutual influence. For example, C is usually compatible with K, while K is usually compatible with C. If C is usually compatible with K but K is not usually compatible with C, K in this prescription are often drugs that play a supporting role and such drugs will appear in many prescriptions. Therefore, it can?t find the above drug group based on the traditional framework of confidence. In this paper, we propose a concept of bidirectional confidence. That is, When given a frequent itemset C1, C2, C3?,Cn, the rule C1,C2,..Ci=>C(i+1),C(i+2)...Cn satisfies the minimum confidence and at the same time the rule C(i+1),C(i+2)...Cn=>C1,C2,..Ci also satisfies the minimum confidence. Then the rule C1, C2?Ci=>C (i+1), C (i+2)...Cn is called the rule that satisfies bidirectional confidence constraint. When two rules are generated, we only need to maintain the one with lower confidence. Considering whether C1, C2,.. Ci and C(i+1), C(i+2)...Cn have positive correlation or not, we still add the metric Interestingness to mine the rules that have positive correlation. This model is applicable to mining mutual influence association rules.

Therefore, the generated rules under this framework must satisfy:  (1) According to the generated frequent itemsets, find out all the rules that satisfy the minimum bidirectional confidence constraint;  (2) According to the generated rules, pick out all the rules that satisfy the minimum Interestingness constraint.



V. CHD DATA EXTRACTION The data used in this experiment is derived from the HIS  system database of China-Japan Friendship Hospital. In order to improve the quality of the model, this paper selects 18  properties which are given by TCM experts as differentiation correlative factors. The doctor?s diagnostic behaviors are regarded as symptoms in accordance with the combination of deficiency in origin and excess in superficiality. Therefore, the purpose of mining association rules is to mine those patterns that the property values can lead to the emergence of certain symptoms. As the length of itemset increases, the support threshold decreases curvilinearly according to a function under the given significance, so as to discover the combinations of more factors. Extracted differentiation factors of patients and diagnosis are shown in TABLE ?.

TABLE I.  DIFFERENTIATION FACTORS AND DIAGNOSIS  gender tongue body ...

main  symptoms 1 TCM diagnosis  male teeth prints ... chest pain turbid sputum  male teeth prints ... chest distress deficiency of Qi,  blood stasis ... ... ... ... ...

female swollen ... chest distress deficiency of Qi, blood stasis   In order to improve the efficiency of algorithm, this paper will transform the attribute values into digital code. Therefore, TABLE ? shows mining differentiation data after coding with TABLE ?.

TABLE II.  MINING DIFFERENTIATION TABLE  94        66 140 ... 127 8  94       66 129 ... 126 1,6  ... ... ... ... ... ...

95        63 141 ... 126 1,6   In order to mine the relationship between the patient's  diagnosis and medication, this paper extracts the corresponding data from CHD database. Considering that the patients using western medicines as well as Chinese medicines are too much and not normative, so western medicine will be divided into several categories according to function and prescription composed by Chinese medicine will be classified into the corresponding prescription effectiveness in accordance with effectiveness . To encode the processed data, we finally get the table that can be mined. TABLE ? is the diagnosis-western medicine category table, and TABLE ?  is the diagnosis- prescription effectiveness table.

TABLE III.  DIAGNOSIS-WESTERN MEDICINE CATEGORY TABLE  14,53,70,112,131,148,209,228 12,14,53,70,103,112,148,182,187,209,228,247  14,70,103,133,148,167,197,252,265,273 ????  0,12,14,20,70,103,133,148,182,215,267  TABLE IV.  DIAGNOSIS-PRESCRIPTION EFFECTIVENESS TABLE  14,118,140 12,14,68,71,92,118     12,14,62,99,118,140 ????  12,14,62,86,96,99,104,140

VI. EXPERIMENTS  A. Validate the Framework of FDSC This experiment is carried out on an IBMR52 notebook  computer, 512M memory, 1.86GHz. Select Table 3-mining differentiation table to tests whether we can mine the combination of more differentiation factors. The parameters of decreasing support are set as follows: min=2, max=6, f(min)=0.3, f(max)=0.12, f(3)=0.27, minconf=0.65.

According to the formula, we solve ? =0.634. Then we can solve support thresholds under each length of itemsets shown in TABLE 5.

TABLE V.  SUPPORT THRESHOLDS  K 1 2 3 4 5 6 Sup 0.3 0.3 0.27 0.236 0.195 0.12   In the traditional association rules, when the support  threshold is set to 0.12, the number of generated rules is very large, and the truly meaningful rules are submerged and can not be effectively extracted. However, association rules of long itemsets can not be discovered with the high support. In this paper, the experiment of decreasing support has extracted a number of association rules, which can not be extracted in the traditional algorithm when support is set to 0.3.

muscus quality (thin), tongue color (dark red), muscus color (white), age (50-100) => blood stasis; confidence=0.66? support=0.13  pulse (wiry), pulse (slippery), viscus location (blood vessel), muscus quality (greasy) => turbid sputum; confidence = 0.72; support = 0.12  B. Validate Two Improved Frameworks Proposed in This Paper This experiment is carried out on an ASUS notebook  computer, 1.5G memory, 1.67GHz.The selected approaches of support are the same support, decreasing support for the linear, decreasing support for the convex curve and decreasing support for the concave curve.

? Framework of FDSCI  Parameters are set as follows: Minconf=0.75, IS=1.

Selected data is the data of diagnosis-western medicine categories in Table ?, and support parameters are set as Fig.1.

Selected data is the data of diagnosis-prescription effectiveness in Table ?, and support parameters are set as Fig.2.

In the data of diagnosis-western medicine categories, the obtained number of rules by four support curves is shown in Fig.3. And in the data of diagnosis-prescription effectiveness, the obtained number of rules by the four support curve is shown in Fig.4.

0. 02 0. 04 0. 06 0. 08 0. 1  0. 12  1 2 3 4 5 6 7 8  length of itemsets  m in  su p  const ant  mi nsup=0. 1  mi nsup=0. 07*[ ( 7- K) / 6]  +0. 03  mi nsup=0. 07*[ ( 7- K) / 6] 0?. 5+0. 03  mi nsup=0. 07*[ ( 7- K) / 6] 2?+0. 03   Figure 1.  Support parameter setting for the data of diagnosis- western medicine categories   0.02  0.04  0.06  0.08  0. 1  0. 12  1 2 3 4 5 6  l ength of  i t emset s  mi ns  up  const ant  mi nsup=0. 1 mi nsup=0. 07*[( 4- K) / 3]  +0. 03 mi nsup=0. 07*[( 4- K) / 3] 0?. 5+0. 03 mi nsup=0. 07*[( 4- K) / 3] 2?+0. 03   Figure 2.  Support parameter setting for the data of diagnosis-  prescription effectiveness        number  of  rul es  cons t ant  suppor t convex suppor t  l i near  s uppor t concave suppor t   Figure 3.  Contrast diagram of the number of rule in the data of  western medicine categories          numbe r  of  rul es  const ant  s uppor t convex  suppor t  l i near  suppor t concave suppor t   Figure 4.  Contrast diagram of the number of rule in the data of  prescription effectiveness     ? Framework of FDSBCI  We select the data in TABLE ?. Diagnosis in TABLE ? is deleted and the data of western medicine categories is only selected. The object is that in the FDSBCI framework we test whether can have mined combinations of many western medicine categories which are ?mutual influences?.

Parameters are set as follows: min=1, max=4, IS=1. The obtained number of rules by the FDSBCI framework under the different decreasing support curves is shown in TABLE ?.

TABLE VI.  THE COMPARISON OF THE NUMBER OF RULES(MINCONF=0.65)  minsup Rule number constant minsup=0.8 0  f(K)=0.6*[(4-K)/3]^0.5+0.2 10 f(K)=0.6*[(4-K)/3]+0.2 18  f(K)=0.6*[(4-K)/3]^2+0.2 20   In the condition of bidirectional confidence, we select a number of obtained rules in the f (K) = 0.6*[(4-K)/3]^2 +0.2 and these rules are given in TABLE ?.

TABLE VII.  GENERATED RULES IN THE CONDITION OF BIDIRECTIONAL CONFIDENCE  Rule Support Bidirectional Confidence IS  ?-blocker <==> antiplatelet category, Chinese patent medicine  0.532 0.671 1.077  antiplatelet category, nitric acid ester<==> Chinese patent medicine, ?-blocker  0.505 0.661 1.07  ?-blocker <==> antiplatelet category, Chinese patent medicine, nitric acid ester  0.505 0.674 1.080   From the above numbers of obtained rules, we can find that  decreasing support can get many meaningful combinations.

According to the actual problem, the parameters can be flexibly adjusted to meet the need of different data. In [6-8] the provided decreasing support is not precise enough and can not adjust decreasing curve according to the practical problems. Their main job is to give a decreasing support curve and how to improve the generation efficiency of frequent itemsets. From the obtained rules in this paper, we can see that all of the two proposed frameworks in this paper can mine meaningful rules.

These frameworks not only verify the existing rules, but also discover some novel rules. These rules provide a better reference for clinical syndrome differentiation and medication.



VII. CONCLUSION This paper focused on the deficiencies of traditional  support-confidence framework and proposed a new association rules framework of fuzzy decreasing support. Through the coefficient adjustment, it can not only satisfy the traditional association rule mining, but also satisfy the associating rule mining with linear decreasing support or fuzzy decreasing support. Therefore, it has higher flexibility. On the basis of them, we proposed two kinds of improved frameworks and  analyzed the significance of them. Experimental results showed that in the clinical diagnosis of TCM symptoms the manner of decreasing support would help to discover the meaningful syndrome differentiation with a combination of multiple factors and to reduce redundant rules of the shorter length of itemsets.

In the combination of western medicine categories and the combination of prescription effectiveness, the improved frameworks proposed in this paper can mine combinations of many western medicine categories and compatibilities of many kinds of prescription effectiveness. So the frameworks proposed in this paper have important theoretical and practical significance, and are helpful to improve clinical differentiation ability and to discover new differentiation factors and to find medicine compatibilities between multiple drugs.

