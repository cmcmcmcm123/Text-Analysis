Intelligent User Search Behaviour Knowledge Discovery

Abstract?It is important for Web search engine providers to study user behaviour in order to have a better understanding of how customers interact with search engines so that they can improve users? overall search experience. However, user behaviour in a search engine is complicated and affected by various factors, e.g. query length, intention/context/time when queries are submitted, etc. It is interesting to find answers to questions such as ?whether loyal users are more likely to issue short length queries or medium length queries? If so, is that behaviour linked with high click through rate or is it linked with the user?s previous search experience?? In this paper we argue that user behaviour should be better analysed from a subjective angle and introduce a granular analysis algorithm to intelligently extract user behaviour knowledge in a human- centric way to answer above questions. We study six variables relating to user behaviour study and demonstrate how fuzzy association rules mining based on mass assignment theory can intelligently analyse user activity patterns in a large scale Web search log data set.



I. INTRODUCTION  The success of a search engine relies on the number of its customers. It is thus important for search engine providers to have a better understanding of how the customers interact with the search engine so that they can improve users? over- all search experience, consequently, growing their customer populations. Web search log at the service provider side records how users interact with the search engine by retaining information about user queries, time stamp, IP addresses, web browser types, devices, etc. Naturally such log file is the most important source to directly study and understand user search behaviour.

There are two major research directions on analysing  user search behaviour: one is modelling user behaviour collectively with the assumption that users who had similar behaviour in the past are likely to have similar behaviour in the future; another research direction focuses on modelling individual search behaviour or grouping queries/session ac- cording to certain criteria. We focus on collective user behaviour in this paper.

Most of previous research on user behaviour analysis  proposed statistical methods to conduct studies on user be- haviour with a focus on a specific goal such as ranking algo- rithms enhancement [1], spam detection [2], predicting user next action, behavioural targeting advertisement [3], brows- ing/email behaviour [4], [5], [6], [7], document relevance [8], query grouping [9] etc. However, there are considerable number of subjective factors that are associated with user  Yun Shen is with HP Labs Bristol, Long Down Avenue, Stoke Gifford, Bristol BS34 8QZ, United Kingdom (email: Yun.Shen@hp.com).

Trevor Martin is with the Department of Engineering Mathematics,  University of Bristol, Bristol BS8 1TR, United Kingdom (phone: +44 117 331 5628; email: Trevor.Martin@bris.ac.uk).

behaviour when interacting with the search engine, e.g. query length, user reaction to visual layout of the returned results, intention/context/time linked with a user when submitting queries, previous experience with the search engine, whether ranking of the results matching user?s expectation, etc.

When analysing user behaviour, it is desirable to use  linguistic labels to describe above various factors in order to conduct a more meaningful study to answer questions such as ?whether loyal users are more likely to issue short length queries or medium length queries, if so, is that behaviour linked with high click through rate or is it linked with the user?s previous search experience?? in a more human understandable way. Fuzzy set theory, particularly Zadeh?s paradigm of computing with words [10], was especially developed for the task of representing human linguistic concepts in terms of a mathematical object, a fuzzy subset.

However, it is interesting to note that we found few fuzzy research focusing on user behaviour understanding. Most of the research efforts aim at web log usage mining [11], [12]; various fuzzy methods, such as fuzzy clustering algorithms [13], [14], [15], [16], fuzzy approximate reasoning [17], fuzzy association rules mining [18], were applied to accom- plish different Web log mining tasks. The closest work to our method is [19], which proposed to use fuzzy association rules to mine sequential user navigation patterns in Web log.

However, the method is complex, and can not be applied to collective user behaviour study. In this paper, we propose six variables relating to user search behaviour and demonstrate how mass assignment theory based fuzzy association rules mining can intelligently analyse user activity in a large scale Web search log data set.

The rest of the paper is organised as follows. In Section II,  we discuss the need of subjective analysis to understand user behaviour and theoretical foundation of fuzzy association rules mining. In Section III, we demonstrate how to intel- ligently extract knowledge from a large scale web search log using the proposed granular association algorithm. Finally in Section IV, we conclude the paper and propose several interesting research directions in the future.



II. GRANULE ASSOCIATION ANALYSIS Association rule mining [20] was first proposed to mine  rules from transaction databases. The aim of association rule mining is to determine whether or not there are links between two disjoint subsets of items for example, do customers generally buy biscuits and cheese when beer, lager and wine are bought.

Formally, let I = {i1, i2, ..., in} be a set of items and  T = {t1, t2, ..., tm} be a set of transactions. Notice that any transaction can be represented as ti ? I. Let x and y be     two non-overlapping subsets of I, X and Y be two sets of transactions containing items x and y respectively. The goal of association analysis is to search for interesting association or correlation relationships between X and Y . That is, if the items in x appear in a transaction, it is likely that the items in y will also appear i.e. it is not an implication in the formal logical sense.

There are two useful measures for the association analysis;  support and confidence. The support of a rule is the fraction of transactions in which both X and Y appear, and the confidence of a rule is an estimate (based on the samples) of the conditional probability of Y given X . The mathematical definitions are given below.

Supp(X ,Y) = |X ? Y|  |T | (1)  Conf(X ,Y) = |X ? Y|  |X | (2)  Typically association rule mining algorithms discover all item associations (or rules) in the data that satisfy the user- specified minimum support (minsup) and minimum confi- dence (minconf) constraints. Minsup controls the minimum number of data cases that a rule must cover.Minconf controls the predictive strength of the rule. A association rule is correct if it satisfies these two parameters.

Fuzzy association analysis has been intensively studied in  recent years [21], [22], [23], [18]. The standard extension to the fuzzy case is to treat the (multi-) sets X , Y as fuzzy and find the intersection and cardinality using a t-norm and sigma-count respectively. The confidence Equation (2) is transformed into  Conf(X ,Y) =  ?  i?I  ?X?Y(i)  ?  i?I  ?X (i) (3)  where ? refers to the monadic fuzzy membership function.

Using min and the sigma count for cardinality can be unsatisfactory [22] because it does not distinguish between several tuples with low memberships and few tuples with high memberships.

In the granule setting we allow partial membership. For  example, instead of looking for an association between potato crisps and beer, we might look for an association between snack foods and alcoholic drinks. It is important to note that we are dealing with conjunctive fuzzy sets (monadic fuzzy relations) here. Mass assignment theory is normally applied to fuzzy sets representing possibility distributions and the operation of finding the conditional probability of one fuzzy set given another is known as semantic unification [24]. This rests on the underlying assumption of a single valued attribute. A different approach is required to find the conditional probability when we are dealing with set-valued attributes. In the rest of the section we briefly discuss mass assignment based fuzzy association rule mining algorithm.

Detailed theoretical study can be found at [25].

A. Granule Association Analysis: Mass-based Approach When working with large datasets, a natural approach is  to group similar items/transactions into categories (or sets) and summarise the data in term of such categories, which is a key feature of human intelligence to discover knowledge.

Granules provide a convenient way to describe a finite set of objects by specifying certain selection criteria. Once the granules are constructed, one may be interested in developing computational methods to study the relationships among these granules.

The core of information granulation [26] is that informa-  tion can be processed on different levels of abstraction in which data objects are organised into meaningful granules1 so as to convey a perception of information itself. Thus, it is necessary to study the criteria for deciding how ?a clump of points (objects) are drawn together by indistinguishability, similarity, proximity or functionality [26]?. In this paper, we assume that the entities (instances) that are being categorised are known unambiguously.

We consider two granules, represented as monadic fuzzy  relations X and Y on the same domain, and wish to cal- culate the degree of association between them. For exam- ple, consider a search transaction database of Web search engine, containing activity time and number of queries fig- ures. We can categorise transactions according to whether their activity time are long, medium or short and also according to whether their click through rate figures are high, moderate or low. A mining task might be finding out whether the high click through rate figures are associated with long activity time. Given Table I  TABLE I ACTIVITY TIME V.S. CLICK THROUGH RATE  ID Activity Time(s) Click Through Rate a 4,000 10% b 3,200 4% c 2,000 8% d 800 7%  suppose we have source granule as long activity time (X ) and target granule as high click through rate (Y), by defining the monadic fuzzy relations  X = [a/1, b/0.8, c/0.5, d/0.2]  and Y = [a/1, b/0.4, c/0.8, d/0.7]  It is important to note that these represent sets of values that all satisfy the related granule to a degree. Unless explicitly mentioned, all the sets in the rest of the section shall be interpreted as conjunctive relations. The confidence in an association rule in such setting can be calculated as follows.

1A fuzzy subset of the universe corresponds to a granule in this paper.

Without loss of generality, we explain the operations on the source granule. For a source granule, we have  X = [x1/?X(x1), x2/?X(x2), ..., x|X |/?X(x|X |)]  we can define the corresponding mass assignment [24] for the source granule as follows. Let the set of distinct memberships in X be  {? (1) X , ?  (2) X , ..., ?  (nX ) X }  where ? (1) X > ?  (2) X > ... > ?  (nX) X  and nX ? |X |.

Let  X1 = {[x|?X(x) = ? (1) X ]}  and  Xi = {[x|?X(x) ? ? (i) X ]}, 1 < i ? nX  then the mass assignment corresponding to X is  {Xi : mX(Xi)}, 1 ? i ? nX  where  mX(Xk) = ? (k) X ? ?  (k+1) X (?  (i) X = 0 if i > nX)  For example, given source granule  X = [a/1, b/0.8, c/0.5, d/0.2]  it has the corresponding mass assignment  MX = {[a] : 0.2, [a, b] : 0.3, [a, b, c] : 0.3, [a, b, c, d] : 0.2}  We can now calculate the confidence in the association between the granules X and Y using mass assignment theory.

In general, this will be an interval as we are free to move mass (consistently) between elements of each Xi and Yj .

For two mass assignments,  MX = {Xi : mX(Xi)}, 1 ? i ? nX  and MY = {Yj : mY (Yi)}, 1 ? j ? nY  the composite mass assignment is  MC = MX ?  MY = {S : mC(S)}  where mC is the composite mass allocation function subject to  nY?  j=1  MC(ij) = mX(Xi)  nX?  i=1  MC(ij) = mY (Yi)  We can get  Conf(X ,Y) =  nX?  i=1  nY?  j=1  MC(ij)? |Xi ? Yj |  nX?  i=1  nY?  j=1  MC(ij)? |Xi|  (4)  We can calculate the confidence in the Table II. This enables us to calculate association confidences with O(cn) complexity, rather than O(n4) where c is a constant and n is the number of focal elements in the source granule X .

For the given example, we get the confidence value 0.744 through Table II. Minimum and maximum confidence are not considered in this paper. Further details can be found at [25]. The theoretical comparison study between the proposed association algorithm and other methods can be found at [27].

TABLE II MASS TABLE  [a]:0.2 [a,c]:0.1 [a,c,d]:0.3 [a,c,d,b]:0.4 [a]:0.2 a a a a [a,b]:0.3 a a a ab [a,b,c]:0.3 a ac ac abc [a,b,c,d]:0.2 a ac acd abcd  Conf(S, T ) = (0.2? (0.2 + 0.1 + 0.3 + 0.4)? 1  +0.3? (0.2 + 0.1 + 0.3)? 1 + 0.3? 0.4? 2  +0.3? 0.2? 1 + 0.3? (0.1 + 0.3)? 2  +0.3? 0.4? 3  +0.2? 0.2? 1 + 0.2? 0.1? 2  +0.2? 0.3? 3 + 0.2? 0.4? 4)/2.5  = 0.744

III. EXPERIMENTS We divide our experiments into two parts. The first part is  conducted on part of a Web search click data set with 65,516 unique users and 3,558,412 lines of web search log from a commercial search engine. This part of the experiments shows the potentials of the proposed fuzzy association rules mining algorithm in intelligent user behaviour profiling. The second part is conducted on the Web search click data set with 197,476 unique users and 10,853,833 lines of web search log from the same commercial search engine. This part of the experiments studies whether enlarged number of unique users affects the results of user behaviour we dis- covered. It also demonstrates the scalability of the proposed method to process large scale data sets.

A. Variables Relating to User Behaviour The data set contains three months Web search click  data collected from a commercial web search engine in 2006. To safeguard user privacy, all user identifiable data were anonymised and are further encrypted when analysing data. The data set has five fields: Anonymous ID, Query String, Query Time, Item Rank and Clicked URL. They are summarised in the Table III. In this section, we propose and    TABLE III WEB SEARCH CLICK DATA SET  Filed name Description Anonymous ID User identifiable data is anonymised with non-reconstructable crypto function.

Query String User queries consist of words separated by a space and have punctuation removed.

Query time The time stamp when user submitting the query, in format of dd-mm-yyyy ss:mm:hh Item Rank The rank of the item on which a user clicked, empty if user didn?t click Clicked URL The URL clicked by a user in the returned search results.

? ?? ?? ?? ?? ??  ? ?? ???  ? ?? ?? ?? ?  ? ????????????	??  ?? 	?  ??   ? ? ? ??? ??? ???  ????	?????	??  Fig. 1. Fuzzy membership function associated user categories  ? ? ? ? ? ?  ? ???? ???  ?????? ???  ? ?? ?? ?? ??  ???? ?????  ?  ???? ???   ?  Fig. 2. Fuzzy membership function associated query length categories  discuss several variables relating to user search behaviour study from a service provider?s perspective. These variables are explained below.

1) Overall Access Times (OAT). It refers to the number of times that a user visits a search engine during the observation time. This variable intuitively indicates a user?s likability of reusing the search engine.

2) Average Query Length (AQL). It refers to the average number of words in the user queries during the ob- servation time. This variable indicates a user?s regular searching tendency when submitting queries. Note that we don?t study the actual semantic meaning of query terms in the user queries as such topic will be discussed in a different paper.

3) Average Page Rank (APR). It refers to the average page rank of the URLs that users clicked in the returned search results. This variable indicates that how positive a user thinks the ranking of the returned search results that match his/her expectation.

4) Cumulative Activity Time (CAT). It refers to the length of the period that a user uses a search engine.

This variable indicates a user?s persistence of using a search engine. Note that we use the fixed 20 minutes as the maximum difference between two activities in  the same session as suggested by [28].

5) Click Through Rate (CTR). It refers to the ratio of user click times to overall visit times during the obser- vation time. This variable indicates a user? satisfaction to the quality of the returned results.

6) Negative Impactor Factor (NIF). It refers to the ratio of the number of a user?s failed (not-clicked) unique queries to the number of clicked unique queries.

This variable indicates the psychological impactor to a user?s searching behaviour. Intuitively, the more times a user failed to find answers after submitting queries, the more negative impression a user would get from a search engine, consequently, the less likely a user might reuse the search engine.

B. Experiment: Part I This part of experiment is conducted on a Web search  click data set with 65,516 unique users and 3,558,412 lines of search transactions. We focus on studying user behaviour with regard to the variables proposed above. Note that fuzzy membership functions defined in this section are based on the priori knowledge and experience, and can be modified accordingly.

1) User Behaviour Knowledge I - Users v.s. Length of  Query: We aim to study the behavioural relationship between users and query length in the first study. We define seven user categories with regard to overall access times (OAT) as one off (of), infrequent (inf), occasional (occ), intermittent (int), frequent (freq), very frequent (vf) and loyal (loy).

Fuzzy membership function associated with user categories is shown in Fig. 1. Similarly, we define three query length categories as short(s), medium(m) and long(l) (with regard to the number of words in a query). Fuzzy membership function associated query length categories is shown in Fig. 2.

?  ?  ?   ? ?? ?? ? ??   ?  ?  ???  ?? ??? ?		 ? ???? ?? ????????  ?????  (a)  ?  ?  ? ? ?? ?? ? ??   ?  ? ? ? ? ? ? ? ?  ??? ?? ??? ??  ??  ?????  ?  ???  (b)  Fig. 3. User behaviour study (I)  ? ? ? ? ?  ? ???  ??????  ?	?  ??????  ? ? ? ?? ??  ??????  ? ?  ????? ??????  ?? ?? ?    ??? ??????  ??? ???  ??????  Fig. 5. Fuzzy membership function associated ranking categories  ? ?? ??? ??? ????  ? ?????  ? ?? ?? ?? ?  ??????? ???? ????	????	?  ?????? ? ?  Fig. 4. Fuzzy membership function associated activity time categories  The results are shown in Fig. 3. Note that we don?t produce the normal format of association rules for sake of better illustration. For example, the value in Fig. 3(a) is 62.3%.

It represents that the confidence value of rule: loyal user ? short length queries is 0.623 or 62.3% (IF a user falls into loyal user category, THEN it is 62.3% confident that the user will submit short length queries). We can observe that  ? Overwhelmingly the users in all categories submit short length queries to the search engine. This behaviour is supported by Fig. 3(a) as all the confidence values are greater than 0.6. Long length queries are rarely used and are not discussed in the rest of the paper. It would be interesting to study the reasons behind this user behaviour, e.g. short queries leading to better search results which may be further exemplified by higher click through rate? We leave this question to be answered in the next section.

? The more the users use the search engine, the more  likely they are to use varied length of queries to search.

This behaviour is exemplified by the Fig. 3(a) as the as- sociation values between users and short length queries decrease while those with medium length queries in- crease. We note that very frequent and loyal users are especially like to use varied length of queries while frequent users are more likely to submit short length queries. It would be interesting to see how such query behaviour of very frequent/loyal users is formed since such behaviour is not related to their activity time (see Fuzzy membership functions in Fig. 4 and associated results in Fig. 3(b)).

2) User Behaviour Knowledge II - Users with Varied Query Length v.s. Average Page Ranking, Negative Impact Factor: We study how search behaviour of frequent/very frequent/loyal users is associated with the ranking of re- turned search results. We don?t study their behaviour with regard to long queries as we conclude in Section III-B.1 that such queries have no significant association with the users.

We define the page ranking categories as Top, High, Medium, Low, and Very Low. Fuzzy membership function is shown in Fig. 5. The results are shown in Fig. 6. We can observe that  ? Overwhelmingly the users in all categories click top and high ranking results as shown in Fig. 6.

? When submitting short length queries, frequent and very frequent users are more likely to click top rank- ing results while loyal users are more interested in high ranking results. When submitting medium length    ?  ??  ? ?? ? ? ?  ? ?? ?  ? ? ?? ??  ??????  ???? ?? ?   ????? ?  ???  ???  ???  ???  ?????  Fig. 6. User behaviour study (IIA)  ? ??? ??? ??? ??? ???  ? ?  ??  ?????? ??   ?? ?  ?? ?  ??	?? ??????????	??? ?  ??? ???  ???? ??  ??? ??? ??? ???  Fig. 7. Fuzzy membership function associated with negative impact factor categories  queries, it is interesting to note that loyal users are most likely to click high ranking results than top ranking results as we can see in Fig. 6 that there is significant difference between the association values. This result is especially interesting to service providers as our results show that loyal users have different opinions with regard to their ranking algorithm. It would be helpful for service providers personalise/optimise their ranking algorithm or page layouts for specific users that are identified as loyal and submitting medium length queries.

The above results motivate us to ask another question: would users be impacted negatively if the returned results don?t match their expectation? Intuitively, the more occasions a user failed to find an answer through a query, the more negative impression a user would get from a search engine.

Thus, by investigating such behaviour, it is helpful for the search engine to have a better understanding of users? satisfaction with the quality of the returned results in order to further improve their search experience. We define negative impact factor categories as Low, Medium and High. Fuzzy membership function is shown in Fig. 7. The results are shown in Fig. 8. We can observe that: the more frequently the users use the search engine, the less likely they are affected by negative impact factor; the higher ranking results the users usually click, the more likely they are affected by negative impact factor. It is thus important for service providers to ensure that top and high ranking results maximumly match users? expectation.

? ?? ?? ?? ?  ? ? ? ?  ?  ???  ? ?? ?? ?  ?? ??  ??????? ?? ? ????? ??  ???? ?? ??? ???? ?? ???  ???  ??????  ???  ??? ??  ????  Fig. 8. User Behaviour Study (IIB)  ? ? ??? ??? ??? ???  ? ? ?? ?????  ? ?? ?? ?? ?  ??????? ??	?????  ??? ???  ???  ??? ??? ???  Fig. 9. Fuzzy membership function associated with click through rate categories  3) User Behaviour Knowledge III - Users with Varied Query Length v.s. Click Through Rate: We move on to study how search behaviour of frequent/very frequent/loyal users is associated with the click through rate, which is a good way of measuring the success of search engines. We de- fine click through rate categories as Low, Medium, and High.

Fuzzy membership function is shown in Fig. 9. The results are shown in Fig. 10. We can observe that: Fig. 10 shows that loyal users when submittingmedium length queries are very likely to achieve high click through rate (with confidence value 0.74) by clicking high ranking results. They are also less likely to be affected whenmedium length queries failed to return satisfactory answers. The benefit of this result is that it would enable service providers to accordingly adjust their advertisement strategy to allow medium length keyword    ???  ?	? ???  ???  ??? ?? ??? ??  ??? ?? ??? ??? ?? ???  ?  ???  ? ?   ? ? ?? ?  ? ?  ??  ?????  ???  ???    ?  ? ? ?? ?? ?  ? ?  ? ?? ?? ?  ?? ??  ?? ?  ?  ? ?? ?   ? ?? ?  ?? ??  ??? ?? ???  Fig. 10. User behaviour study (III)  strings for advertisers in order to maximise potential click through rate of online advertisements displayed in the search results pages.

C. Experiment: Part II This part of experiment is conducted on a Web search click  data set with 197,476 unique users and 10,853,833 lines of search transactions. This data set contains all the data we used in the Section III-B. We study whether enlarged number of unique users affects the results of user behaviour profiling stated in previous section. It also demonstrates the scalability of the proposed method to process large scale data sets.

We re-use all the fuzzy membership functions defined in  the previous section. The results are shown in Table IV. It is safe to conclude that enlarged number of unique users does not affect the results of user behaviour in Section III-B, which is strong evidence that the proposed method can be used to predict people?s behaviour due to the stability of the results.

To study the scalability, we compare the actual time of  computing V and the results are shown in Table VI. The experiments are carried out on a Macbook 2.0GHZ with 4GB memory running Mac OS X 10.5.8 and Java 1.6.0 13. As the number of users in the second part of the experiment is increased by 3 times, it is noticeable that the actual comput- ing time increases by around 10 times while theoretically it should be around 3c times where c is a constant factor as mentioned in Section II-A. This would give c a value of 3.5.

It is reasonable to conclude that the complexity of our fuzzy association algorithm is O(3.5n) in practice.



IV. CONCLUSION AND FUTURE WORK In this paper, we propose to use mass assignment based  fuzzy association rule mining algorithm to personalise anal- ysis of user behaviour from web search log for search engine providers. We demonstrate that the proposed method can automatically discover user behaviour knowledge and is scalable to process large scale dataset. In our future work, we will conduct more studies on several directions affecting user search behaviour in the search engine such as visual layout of returned results, semantic intention of user queries, psychological impact of failed queries. It would  be desirable to assess the proposed method in different web search logs, and comparatively study the possible user behaviour variability in different search engines.

