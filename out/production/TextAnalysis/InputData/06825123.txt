Router-based Request Redirection Management for a Next-Generation Content Distribution Network

Abstract?The increase in the amount of digital data trans- ferred between contents Servers and Clients in a network causes problems created by congestion when downloading big web files, streaming media, etc. Content Delivery Networks (CDNs) are introduced to overcome such problems by redirecting the Clients request to the nearest Server. However, as the number of people accessing Internet increases rapidly, the performance of CDN is reduced, resulting in network congestion at times.

To solve these problems, we propose an architecture in which a new management method is employed to redirect the Clients request using a content-based Router called the Service-oriented Router (SoR). This method is more effective than the currently implemented, traditional DNS-based request redirection (RR).

The SoR is a special router that can perform a deep packet inspection of the packet streams. Our experiments were based on analytical modeling as well as test bed experiments, and they confirmed that the response time in the Router-based RR was less than that in the DNS-based RR by 23.3%. In addition, our test bed experiments showed that the RTT in the Router-based RR is less than that in the DNS-based RR by 7.7%.



I. INTRODUCTION  Efficient content delivery over the web has become an important element in improving web performance. Against this background, content distribution networks (CDNs) have been proposed to maximize bandwidth, improve accessibility, and maintain correctness through content replication. CDNs enable the distribution of content to cache servers located close to users, thus realizing fast, reliable applications and web services for the users [1]. CDNs are used by internet service providers to deliver static as well as dynamic contents, which are replicated on distributed servers [2], [3]. When a specific web page, file, or program is requested by a user, the closest server is dynamically determined for reducing the load on the main server. This distribution method optimizes the throughput of content delivery to the user.

CDNs provide numerous benefits for cacheable content: low delivery cost, high quality of experience for end-users, and high robustness of delivery. Hence, they are frequently used for large-scale content delivery. In particular, the adoption of CDNs helps realize performance improvement from the following viewpoints: (i) overall system throughput, that is the average number of requests served in a time unit, and (ii) response time or round trip time (RTT) for the client, measured from the time of sending a request [4]. Finding the nearest surrogate server for a particular CDN client is the most important factor in minimizing a clients response time. Connection performance largely depends on the request  redirection (RR) management, of which domain name system (DNS)-based management and URL rewriting [5] are the most popular ones, used by the CDN provider. CDN provider such as Akamai [6] use DNS-based management to redirect requests from clients to their nearest server.

In this paper, we propose a method in which service- oriented router (SoR) functions are implemented in a next- generation CDN for effective and efficient RR management; SoR is a Router that can interact with and provide services to clients by using a defined application program interface (API) [7]. SoR can observe traffic data streams, inspect packet payloads as well as packet headers, and store the designated data in the associated database. To store data in a database, the SoR uses a new query language, named service-oriented switch and router query language (SSRQL) [7]. The proposed SSRQL can provide up to 10 Gbps throughput. Application programmers can access the database by using SSRQL queries to develop new services in the SoR, such as capturing content in a website [8] and routing redirection for a CDN [9] or for artificial intelligent systems such as Bayesian networks [10].

In addition, an SoR monitors packet streams and conducts deep packet inspection of payloads as well as headers [7], and re-routes packets based on their payloads [9], [11].



II. RESEARCH BACKGROUND  A. Minimizing response time in a CDN  A CDN delivers contents to users from those edges of the network that are close to the client. A CDN realizes a smaller response time compared to that when the content is obtained from the origin server, as shown in Figure 1. In the example given in the figure, if a client contacts the nearest server, which is server 1 to retrieve content (via path 3), the response time is shorter than that if the content is obtained from the origin server (via path 1). Furthermore, network usage is reduced and optimized on path 3 because backbone traffic is reduced.

Regarding to reduction of the response time for a particular client, three factors have to be considered: (i) network delay, (ii) server processing time, and (iii) traffic density. Our re- search is mainly aimed at minimizing the above three factors by employing a new model of redirection management.

B. DNS  The DNS is a distributed database containing records of a name-to-address mapping system by caching resource records at intermediate name servers. Each record has a time-to-live  Globecom 2013 Workshop - The 5th IEEE International Workshop on Management of Emerging Networks and Services     (TTL) value that controls how long it will be cached, and gen- erally, TTL values are set to one day [5]. Although small TTL values allow fine-grained load balancing and rapid response to the changes in the server or network load, the clients have to contact the authoritative name server for every name resolution request. This phenomenon increases web access latency and may cause congestion. Akamai uses FreeFlow DNS, which is an improved version of a DNS for realizing high-performance, fault-tolerant web content delivery service [12]. FreeFlow uses three layers of DNS resolving, namely root-level, high-level (HL), and low-level (LL) DNS.

Router  Router Router  Server-1  Server-2  Server-3  Nearest-server  Origin-server  DNS Server  Clients The Internet  Fig. 1. A CDN Illustration with DNS-based RR. Content is replicated to the nearest server to reduce response time.

The disadvantages of DNS-based redirection method are that users need to obtain the IP address before contacting servers and that DNS traffic consumes some of the bandwidth from the internet backbone, thus increasing the time taken to initiate a connection. Thus, the response time for accessing the content in a DNS-based scheme. Therefore, minimizing the amount of DNS traffic in a network will result in effective load for the next-generation network.

C. SoR  The SoR is a special router that snoops and captures data streams passively and stores data in a high-speed database.

SoR can be designed to communicate with other SoRs and share information such as link status, link condition, and sur- rogate server information. NEGI, a software-based simulator, was created by implementing an SoR with basic functionalities [13]. NEGI is a packet analyzer that analyzes data streams and compares packet streams by using regular expressions. The SoR can also analyze packet streams and store the frequency value of accessing websites and pdf files [8]. Such information can be used to provide recommendations for web sites and pdf files for clients. Experimental results show that an SoR- based CDN environment has advantages over DNS-based implementation from the viewpoints of connection initiation and content migration [9].



III. MODELING MANAGEMENT OF REQUEST REDIRECTION  A. Router-based redirection  We designed and modeled a Router-based RR management in a CDN using an SoR as the core-router [14]. Here, for a given workload, we derive an expression of redirection prob- ability to minimize the response time. Next, we compute the average response time, taking into account the service rate and network delay. Then, we perform a systematic performance analysis to estimate the optimal redirection probability ??.

Client  Client  SoR 1  SoR n  SINK  Surrogate 1  Surrogate n  SINK    n  n1  nn  SoR1  SoRn  S1  Sn    n  Fig. 2. Design architecture of CDN with router-based routing redirection using an SoR as router  Figure 2 illustrates the system model for a CDN with router-based RR. Requests from clients i reach a server j through an SoR i. We modeled the system as an M/M/1 queuing model, where the arrival of requests from a client can be modeled as a Poisson process with rate ? and an exponential distribution service time ?. We consider ?ij as the redirection probability; E[T ], the expected response time; and D, a one-way network delay between nodes. For the general case of a system of n SoRs, and n surrogate servers, A = {?11, ..., ?ij , ..., ?nn} denotes a matrix of RR probability from the SoR to surrogate servers E[T ] = {T1, ..., Tn} as the vector of system response time in a particular node, and D = {d12, ..., dij , ..., dnm} denotes the matrix of network delay from node i to j. Furthermore, ? = {?1, ..., ?n} denotes the vector of total input of request arrival rates into the system, and L = {?1, ..., ?n} denotes the vector of packet arrival rates at a particular node, XSoR = {?SoR1 , ..., ?SoRn } as the service rate in SoR; XSS = {?SS1 , ..., ?SSn } denotes the service rate in surrogate server.

Theorem 1. The expected response time of the system with Router-based RR depicted in figure 2 using a redirection probability A is given by the following equation:  E[T ] =  ?  ( L  XSoR ? L + AL  XSS ?AL ) +  DSoR +ADSS (1)  Proof. The total response time is composed of three factors: (i) the response time in SoR, (ii) the response time in surrogate server, and (iii) the network delay from the client to the SoR and from the SoR to the surrogate server. The design  Globecom 2013 Workshop - The 5th IEEE International Workshop on Management of Emerging Networks and Services     architecture shown in Figure 1 is considered as a queuing network with tandem servers. Refer to Jackson Networks with M/M/1 queuing model [15]. if N be the average number of customers, the response time of the system is given by the following equation:  T = N?n i=1 ?i  =  ( 1?n  i=1 ?i  ) n? i=1  ?i ?i ? ?i (2)  As shown in Figure 1, the systems consist of SoRs and surrogate servers. Let client i sent a packet request with arrival rate ?i. The arrival rate in an SoR is equal to the arrival rate from the client i, ?SoRi = ?i. Let ?ij be the redirection probability from SoR i to surrogate j. Since every packet is analyzed in an SoR and then redirected to the nearest surrogate server, the arrival rate in the surrogate server depends on the probability ?ij such that ?SSi = ?ij?i. Next, consider a one- way latency when transmitting a packet request from client i to SoR i by dSoRi and from SoR i to surrogate server j by dSSij . Equation (2) can be rewritten as follows:  Ti =  ?i  ? ? ?i ?SoRi ? ?i  +  n? j=1  ?ij?i ?SSi ? ?ij?i  ? ?  +dSoRi +  n? j=1  ?ijd SS ij  (3)  In Eq. (3), let d be represent vector Di for i = 1, ..., n , and let T be vector Ti for i = 1, ..., n to get Eq. (1).

From Eq. (1), we can compute the optimal redirection probability to minimize the response time over all requests.

In particular, let A? = {?11, ..., ?ij , ..., ?nn} denote the matrix of optimal request redirection probability. The optimal redirection probability A is obtained by differentiating Eq. (1) such that ??x (E[T ]) = 0. The optimal redirection probability A? can be used to predict the average response time for the system with router-based redirection, where the equation is given as follows:  T ? =  ?  ( L  XSoR ? L + A?L  XSS ?A?L ) +  DSoR +A?DSS (4)  B. DNS-based redirection  In order to compare the performance of the router-based RR, we consider a CDN architecture with DNS-based RR, as depicted in Figure 3. Requests come from cluster client i to server j through router i. We model the system as an M/M/1 queuing model with CDN architecture with DNS-based RR management. We consider a redirection algorithm in which a request is redirected to the nearest surrogate server with probability ?ij . We use parameters similar to those used in router-based RR management for all equations; in addition, the  parameters XR = {?R1 , ..., ?Rn } is considered as the service rate in the router. XDNS = {?DNS1 , ..., ?DNSn } is considered as the service rate in the DNS server.

Theorem 2. The expected response time of the system using with DNS-based RR depicted in figure 3, using redirection probability A is given by the following equation:  E[T ] =  ?  ( L  XR ? L + A1L  XDNS ?A1L +  A2L  XSS ?A2L ) +  DR +A1D DNS +A2D  SS  (5)  Proof. Unlike in the case considered in theorem 1, the total response time here is composed of 4 factors: (i) the response time of the router, (ii) the response time of the DNS, (iii) the response time of the surrogate server (SS), and (iv) the network delays from the client to the router, from the router to the DNS and from the router to the surrogate server. The design architecture, depicted in Figure 3, is considered as a queuing network with tandem servers with the M/M/1 queuing model.

The system consists of routers, DNS servers, and surrogate servers.

Client SINK  Client  DNS  DNS  Surrogate 1  Surrogate n  SINK  Router 1  Router n    n  n1  nn      R1  Rn  S1  Sn  DNS  DNS    n  Fig. 3. Design architecture of CDN with dns-based routing redirection  As in the proof for theorem 1, and referring to the case of a Jackson network with M/M/1 queuing networks, let client i send a packet request with arrival rate ?i. As shown in Figure 3, the arrival rate at the router is equal to the arrival rate from client i, ?Ri = ?i. Let ?i be the redirection probability from router i to DNS server and ?ij , the redirection probability from router i to surrogate j. The DNS server provides the address of the appropriate destination so that the client?s request is redirected to the best server. According to this condition, the arrival rate at the surrogate server depends on the probability ?ij such that ?SSi = ?ij?i.

Next, we consider a one-way latency when transmitting the packet request from client i to router i with dRi delay, from router i to DNS server with dDNS delay, and from router i to surrogate server j with dSSij delay. The system response time is given as follows:  Globecom 2013 Workshop - The 5th IEEE International Workshop on Management of Emerging Networks and Services     Ti =  ?i  ( ?i  ?Ri ? ?i +  ?DNS?i ?DNS ? ?DNS?i+  n? j=1  ?SSij ?i  ?SSi ? ?SSij ?i  ? ?+dRi + ?idDNS +  n? j=1  (?ijd SS ij  (6)  Here, d is of Dij for i, j = 1, ..., n; T , vector Ti for i = 1, ..., n, thus yielding equation (5).

From Eq. (5), we can compute the optimal redirection prob- ability to minimize the response time over all requests. The optimal redirection probability A is obtained by differentiating Eq. (6) such that ??x (E[T ]) = 0. The optimal redirection probability A? can be used to predict the average response time for the system with DNS-based redirection, where the equation is given as follows:  T ? =  ?  ( L  XR ? L + A?1L  XDNS ?A?1L +  A?2L XSS ?A?2L  ) +  DR +A?1D DNS +A?2D  SS  (7)  C. Numerical Analysis  In this section, we will show that the router-based RR management can reduce the total response time. We consider a system comprising a client, an SoR, and two surrogate servers with identical service rates. Furthermore, di is the network delay between the client and SoR, and dSSij , between the SoR and surrogate server. We set ?SS1 > ?  SS 2 and d  SS 11 > d  SS 12 so  that ?11 = 0, and set ?? = ??12. The system response time is computed based on theorem 1:  T =  ?  ( ?1  ?SoR1 ? ?1 +  ?11?1 ?SS1 ? ?11?1  ??12?1 ?SS2 ? ?12?1  )  +dSoR + ?11d SS 11 + ?12d  SS  (8)  where ?11 +?12 = 1. We refer to the term ?? as the optimal redirection probability from the SoR to the default surrogate server, and (1???) is the redirection probability to the other surrogate server. Then, according to the Eq.(8), the response time of the router-based redirection system is as given below:  T ? =  ?1  ( ?1  ?SoR1 ? ?1 +  ??11?1 ?SS1 ? ??11?1  +  (1? ??11)?1 ?SS2 ? (1? ??11)?1  ) + dSoR + ??11d  SS 11 + (1? ??11)dSS12  (9)  The response time of the DNS-based RR is calculated in the same manner as described above. Consider a system, as shown in Figure 3, comprising a client, router, and DNS server, and two surrogate servers. The response time of the DNS-based RR management is given below:  T ? =  ?1  ( ?1  ?R1 ? ?1 +  ?DNS1 ?1  ?DNS1 ? ?D1 NS?1 +  ??11?1 ?SS1 ? ??11?1  + (1? ??11)?1  ?SS2 ? (1? ??11)?1 ) +dR+  ?DNS1 (d DNS1 1 + d  DNS2 1 ) + ?  ? 11d  SS 11 + (1? ??11)dSS12  (10)

IV. PERFORMANCE EVALUATION AND RESULT  We conducted simulations to verify the aforementioned the- orems with default values as follows: the average of network delay between client (d1) and router or SoR (measured in one cluster of PlanetLab network testing environment) was 0.5 ms.

The average delay from the SoR/router to the DNS server (d2) is 30 ms, as per DNS records [5].

0 50 100 150 200 250  0.03  0.04  0.05  0.06  0.07  0.08  0.09  0.1  0.11  0.12  0.13  Network delay (d) in ms  R es  po ns  e tim  e (s  )  SoR?based ? = 0.90 DNS?based ? = 0.90 SoR?based ? = 0.75 DNS?based ? = 0.75 SoR?based ? = 0.50 DNS?based ? = 0.50  Fig. 4. Total response time based on the delay of the surrogate server  0 50 100 150 200 250  0.1  0.2  0.3  0.4  0.5  0.6  0.7  0.8  0.9   Network delay (d) in ms  R ed  ire ct  io n  pr ob  ab ilit  y ?  ? surrogate server = 0.99 ? surrogate server = 0.95 ? surrogate server = 0.90 ? surrogate server = 0.75 ? surrogate server = 0.50  Fig. 5. Redirection probability based on the delay of surrogate server  Globecom 2013 Workshop - The 5th IEEE International Workshop on Management of Emerging Networks and Services     The network delay between the SoR/router to the surrogate server (d3) is 36 ms [2] with a packet size of 1500 bytes.

Service rates for the router and DNS-server are 10 Mbps each; those for the SoRs are 5 Mbps, and for the surrogate servers, 1 Mbps. Since the SoR has more functions than a regular router, the processing time for the SoR may be longer than that for regular routers. Therefore, we consider the SoRs service rate as 50% of that of a regular router.

We set the DNS server service rate as equal to that of a regular router. We calculate the response time of router-based RR by using equation (4) and compare this response time with that of DNS-based RR, as calculated by equation (7).

We consider two Surrogate Servers that have the same contents and Server loads. Surrogate Server#1 has a fixed delay (36 ms) from SoR. Surrogate Server#2 has a dynamic delay varying from 0 to 250 ms. Figure (7) shows response time as a function of the network delay of the Surrogate Server for different system loads ?. For the following Surrogate Server loads; ? = 0.50, ? = 0.75, and ? = 0.90, the performance of routing redirection by Router-based RR was better than that by DNS-based RR management.

The differences in response time between the Router-based and DNS-based RR are 11 to 14 ms. For Router-based loads of 0.5 and DNS-based loads of 0.5, when the network delay of Surrogate Server#2, dSS23 ? 75 ms, most of the requests are redirected to the nearest Surrogate Server. The redirection probability obtained by differentiating Equations (1) and (5), as shown in Figure 5, the servers destination could be Surro- gate Server#1 or Surrogate Server#2, depending on the value of redirection probability.



V. REDIRECTION MANAGEMENT TEST BED  The test bed for Router-based RR was designed using pthread library and UNIX socket communication library; the detailed specification can be found in [11]. The simulations were designed to be executed on a testing network environ- ment of Hitachi Central Research Laboratory in Global Inter Cloud Technology Forum (GICTF) [16]. This network has data centers at Shin-Kawasaki Campus of Keio University Japan (K2 Campus), and at Sendai, Japan.

As shown in the Figure 8 (upper panel), we implemented Router-based RR management in CDN infrastructure. In keep- ing with the constraints imposed by our testing network resources, we set up one client, three routers (SoRs), and two Servers; these resources were sufficient for evaluating the proposed method. SoR#1 is the edge SoR for the Client; SoR#2, for Server#1; and SoR#3, for Server#2. The DNS- based RR management topology is shown in Figure 8 (lower panel). We designed a DNS server using UDP socket com- munication programs to emulate the real DNS Server. We use root DNS, high-level DNS, and low-level DNS emulations for comparing the performances of Router-based and the DNS- based RR management.

Experimental network parameters of the test bed system are as follows: Service rates of Router#1, Router#2, Redirector, and DNS Server are 10 Mbps each, while those of SoR#1,  K2-Network Sendai-Network  Client 172.22.0.8 SoR1  172.22.0.5 SoR2  172.22.0.6 SoR3  172.22.0.200  Main Server 172.22.0.204  Surrogate Server 172.22.0.9  K2-Network Sendai-Network  Client 172.22.0.8  Redirector 172.22.0.5 Router1172.22.0.6  Router2 172.22.0.200  M: Server and Root DNS  172.22.0.204  Surrogate Server HL DNS and LL DNS  172.22.0.204  Router-based topology test bed  DNS-based topology test bed  Fig. 6. Designs of redirection management test beds (upper panel: router- based RR management topology; lower panel: DNS-based RR management topology) in Hitachi?s network [11]  0 500 1000 1500 2000 0.01  0.02  0.03  0.04  0.05  0.06  0.07  0.08  0.09  0.1  Packet order (th)  R TT  (s )  Router?based RTT DNS?based RTT  Fig. 7. Result of the Router-based and DNS-based experiment test bed [11]  SoR#2, and SoR#3 are 5 Mbps each; the rates for the main Server and Surrogate Server are 1 Mbps each. Packet arrival rate from the Client is set as 20 packet/s, i.e., 0.25 Mbps. We redirect the Clients request based on the sequence numbers of the packets. The results obtained using the experiment test bed are shown in Figure 10. In DNS-based connection initiation, the RTT for the first set of packets (order packet 1) was > 0.09 s, while that for the Router-based method was < 0.04 s.

The RTT average for Router-based RR is 0.026 s, while that for DNS-based RR is 0.028 s, as shown in Figure 13; thus, the RTT for Router-based RR is less than that for DNS-based RR by 7.7

VI. RELATED WORK  Previous research has investigated the use and effectiveness of CDNs. Recent studies that DNS-based RR techniques add noticeable overhead because of DNS latencies. Most of these studies have been empirical ones, studying and evaluating response times on real CDNs [17] [18], effectiveness of DNS- based RR [17] [18] [19], server selection [20] [18], or Server location [21]. Other papers and contributions have tried to  Globecom 2013 Workshop - The 5th IEEE International Workshop on Management of Emerging Networks and Services     model the behavior of CDNs using different techniques, but usually simplifying the nature of such systems and losing generality. These studies have focused mainly in two top- ics: Server placement [22] or evaluation of response time.

Different techniques have been used for the evaluation of the second parameter: linear time response of Web Servers [23], Water Filling Schema [24] and Queuing Theory [25].

An Energy-efficient Routing Protocol [26] can be considered to be implemented for the next-CDN technology. In this paper, the research works start from basic assumptions in queuing theory with M/M/1 queuing model, and introduces new features of router-based routing redirection in CDN that resemble a more realistic and general model. This way the impact on performance of important parameters such as the routing redirection probability, network delay, and response time can be studied. Moreover, it is worthwhile establishing some dependencies and relationships among these parameters, as empirical analytic results are always finite and cover only a limited variability range of the CDN parameters.



VII. CONCLUSION We adopted empirical, analytical, and experimental approaches to study RR performance achieved by different methodology.

Although the service rate in our model, which employs Router- based redirection, is 50% of the service rate of a regular Router, it achieved a reduced response time of about 11 to 14 ms with optimal redirection between the two Servers. This response time is 23.3% of that in DNS-based redirection. For the performance result based on when the probability of DNS- servers cache miss is 0.05 and load is 0.05, the response time of the Router-based system is 64 ms, i.e., 4.4% lower than that of the DNS-based system. In a congested situation when the DNS-servers cache miss is 0.75 and load is 0.90, the response time of Router-based is 0.64s, i.e., 44.8% lower than that of the DNS-based system. In addition, we conducted a test bed implementation of the Router-based redirection method. The RTT for the Router-based scheme is 26 ms, i.e., 7.7% lower than that of the DNS-based scheme.

